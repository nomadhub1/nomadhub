<%- include('../partials/head') %>
<%- include('../partials/header') %>
<% if (user && user.isAdmin) { %>
<div class="admin-layout" style="display:flex;min-height:calc(100vh - 80px);background:#f7f8fa; padding-top:70px;">
  <%- include('../partials/admin_sidebar', { user: user, activePage: 'jobs' }) %>
  <div style="flex:1;">
<% } %>

<section class="job-board" style="padding: 3rem 0; background: #f7f8fa; min-height: 60vh;">
  <div class="container" style="max-width: 900px; margin: 0 auto; background: #fff; border-radius: 18px; box-shadow: 0 4px 24px rgba(0,0,0,0.08); padding: 2.5rem 2rem;">
    <h1 style="font-size: 2.2rem; font-weight: 700; margin-bottom: 1rem; color: #222; letter-spacing: 0.01em;">Sponsored Job Board <span style="font-size:1rem; color:#888; font-weight:400;">(Beta)</span></h1>
    <p style="font-size: 1.15rem; color: #444; margin-bottom: 2rem;">Discover remote jobs and sponsored opportunities for digital nomads.</p>
    <% if (isAdmin) { %>
      <a href="/job/new" class="btn-primary" style="margin-bottom: 2rem; display: inline-block;">Post a Job</a>
    <% } %>
    <div class="job-list" style="margin-top: 2rem;">
      <% if (jobs && jobs.length) { %>
        <% jobs.forEach(function(job) { %>
          <div class="job-card" style="background:#f7f8fa;border-radius:12px;padding:1.5rem 1.2rem;margin-bottom:1.5rem;box-shadow:0 2px 12px rgba(0,0,0,0.06);">
            <h2 style="font-size:1.3rem;color:#222;margin-bottom:0.5rem;"> <%= job.title %> </h2>
            <div style="color:#555;font-size:1.05rem;margin-bottom:0.5rem;"> <%= job.company %> <% if (job.location) { %> | <span style="color:#888;"> <%= job.location %> </span> <% } %> </div>
            <div style="color:#444;margin-bottom:0.7rem;"> <%= job.description %> </div>
            <% if (job.job_url) { %>
              <a href="<%= job.job_url %>" target="_blank" style="color:#0077cc;font-weight:500;text-decoration:underline;">Apply / Learn More</a>
            <% } %>
            <% if (isAdmin) { %>
              <div style="margin-top:1rem;">
                <a href="/job/<%= job.id %>/edit" title="Edit" style="margin-right:0.3rem;display:inline-block;vertical-align:middle;padding:4px 8px;border-radius:6px;background:#f0f6ff;color:#0077cc;">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#0077cc" stroke-width="2"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 1 1 3 3L7 19l-4 1 1-4 12.5-12.5z"/></svg>
                </a>
                <form action="/job/<%= job.id %>/delete" method="post" style="display:inline;">
                  <button type="submit" title="Delete" style="background:#fff;color:#e74c3c;border:none;padding:4px 8px;border-radius:6px;vertical-align:middle;">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#e74c3c" stroke-width="2"><path d="M3 6h18"/><path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/><path d="M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"/><path d="M10 11v6"/><path d="M14 11v6"/></svg>
                  </button>
                </form>
              </div>
            <% } %>
          </div>
        <% }); %>
      <% } else { %>
        <p style="color: #888; font-size: 1.1rem; text-align: center;">No sponsored jobs available. Check back soon!</p>
      <% } %>
    </div>
  </div>
</section>

<%- include('../partials/footer') %>
<% if (user && user.isAdmin) { %></div></div><% } %>
