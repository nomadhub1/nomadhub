<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('../partials/head') %>
    <title>Admin Dashboard - NomadProHub</title>
</head>
<body>
    <%- include('../partials/header') %>
    <div class="admin-layout" style="display:flex;min-height:calc(100vh - 80px);background:#f7f8fa; padding-top:70px;">
        <%- include('../partials/admin_sidebar', { user: user, activePage: 'dashboard' }) %>

        <main class="admin-main" style="flex:1;padding:3rem 2.5rem;">
            <header class="admin-header" style="margin-bottom:2.5rem;">
                <div class="header-content" style="display:flex;justify-content:space-between;align-items:center;">
                    <h1 class="page-title" style="font-size:2.2rem;font-weight:700;color:#222;">Dashboard</h1>
                    <div class="header-actions" style="display:flex;gap:1rem;">
                        <a href="/admin/reset" class="btn btn-ghost" style="background:#f7f8fa;color:#0077cc;border:1px solid #e0e3e8;padding:0.5rem 1.2rem;border-radius:8px;display:flex;align-items:center;gap:0.5rem;">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                            Reset Password
                        </a>
                    </div>
                </div>
            </header>

            <div class="dashboard-content" style="max-width:1100px;margin:0 auto;">
                <div class="stats-grid" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:2rem;margin-bottom:2.5rem;">
                    <div class="stat-card" style="background:#fff;border-radius:14px;box-shadow:0 2px 12px rgba(0,0,0,0.04);padding:2rem 1.5rem;display:flex;align-items:center;gap:1.2rem;">
                        <div class="stat-icon stat-icon-primary" style="background:#f0f6ff;border-radius:50%;padding:0.7rem;display:flex;align-items:center;justify-content:center;">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/>
                                <polyline points="14,2 14,8 20,8"/>
                            </svg>
                        </div>
                        <div class="stat-content" style="display:flex;flex-direction:column;">
                            <div class="stat-value"><%= stats.articles %></div>
                            <div class="stat-label">Total Articles</div>
                        </div>
                    </div>
                    <div class="stat-card" style="background:#fff;border-radius:14px;box-shadow:0 2px 12px rgba(0,0,0,0.04);padding:2rem 1.5rem;display:flex;align-items:center;gap:1.2rem;">
                        <div class="stat-icon stat-icon-success" style="background:#eafaf1;border-radius:50%;padding:0.7rem;display:flex;align-items:center;justify-content:center;">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                                <circle cx="12" cy="7" r="4"/>
                            </svg>
                        </div>
                        <div class="stat-content" style="display:flex;flex-direction:column;">
                            <div class="stat-value"><%= stats.users %></div>
                            <div class="stat-label">Total Users</div>
                        </div>
                    </div>
                    <div class="stat-card" style="background:#fff;border-radius:14px;box-shadow:0 2px 12px rgba(0,0,0,0.04);padding:2rem 1.5rem;display:flex;align-items:center;gap:1.2rem;">
                        <div class="stat-icon stat-icon-warning" style="background:#fffbe6;border-radius:50%;padding:0.7rem;display:flex;align-items:center;justify-content:center;">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                            </svg>
                        </div>
                        <div class="stat-content" style="display:flex;flex-direction:column;">
                            <div class="stat-value"><%= stats.categories %></div>
                            <div class="stat-label">Categories</div>
                        </div>
                    </div>
                    <div class="stat-card" style="background:#fff;border-radius:14px;box-shadow:0 2px 12px rgba(0,0,0,0.04);padding:2rem 1.5rem;display:flex;align-items:center;gap:1.2rem;">
                        <div class="stat-icon stat-icon-accent" style="background:#f0eaff;border-radius:50%;padding:0.7rem;display:flex;align-items:center;justify-content:center;">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
                            </svg>
                        </div>
                        <div class="stat-content" style="display:flex;flex-direction:column;">
                            <div class="stat-value"><%= stats.pageViews %></div>
                            <div class="stat-label">Page Views</div>
                        </div>
                    </div>
                </div>

                <div class="dashboard-actions" style="margin-bottom:2.5rem;">
                    <div class="actions-card" style="background:#fff;border-radius:14px;box-shadow:0 2px 12px rgba(0,0,0,0.04);padding:2rem 1.5rem;">
                        <h3 class="card-title" style="font-size:1.2rem;font-weight:600;margin-bottom:1.2rem;color:#222;">Quick Actions</h3>
                        <div class="actions-grid" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1.2rem;">
                            <a href="/articles/new" class="action-btn action-btn-primary" style="background:#0077cc;color:#fff;padding:0.8rem 1.2rem;border-radius:8px;display:flex;align-items:center;gap:0.7rem;font-weight:500;text-decoration:none;">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 5v14m-7-7h14"/>
                                </svg>
                                Create New Article
                            </a>
                            <a href="/job" class="action-btn action-btn-warning" style="background:#fffbe6;color:#b8860b;padding:0.8rem 1.2rem;border-radius:8px;display:flex;align-items:center;gap:0.7rem;font-weight:500;text-decoration:none;border:1px solid #ffe58f;">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M4 17h16M4 13h16M4 9h16"/>
                                </svg>
                                Manage Jobs
                            </a>
                            <a href="/admin/users" class="action-btn action-btn-ghost" style="background:#fff;color:#444;padding:0.8rem 1.2rem;border-radius:8px;display:flex;align-items:center;gap:0.7rem;font-weight:500;text-decoration:none;border:1px solid #e0e3e8;">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                                    <circle cx="9" cy="7" r="4"/>
                                    <path d="M23 21v-2a4 4 0 0 0-3-3.87m-4-12a4 4 0 0 1 0 7.75"/>
                                </svg>
                                Manage Users
                            </a>
                        </div>
                    </div>
                </div>
                <!-- Add Category Card -->
                <div class="add-category-card" style="background:#fff;border-radius:14px;box-shadow:0 2px 12px rgba(0,0,0,0.04);padding:2rem 1.5rem;margin-bottom:2.5rem;">
                    <h2 class="dashboard-subtitle" style="font-size:1.3rem;font-weight:600;margin-bottom:1.2rem;color:#222;">Add Category</h2>
                    <form action="/admin/categories" method="POST" style="display:flex;gap:1em;align-items:center;">
                        <input type="text" name="name" placeholder="Category name" required class="form-input" style="padding:0.7rem 1rem;border-radius:8px;border:1px solid #e0e3e8;font-size:1rem;">
                        <input type="text" name="slug" placeholder="category-slug" required class="form-input" style="padding:0.7rem 1rem;border-radius:8px;border:1px solid #e0e3e8;font-size:1rem;">
                        <button type="submit" class="btn btn-primary" style="background:#0077cc;color:#fff;padding:0.7rem 1.5rem;border-radius:8px;font-size:1rem;">Add Category</button>
                    </form>
                    <% if (messages && messages.error) { %>
                      <div class="alert alert-danger" style="margin-top:1rem;"><%= messages.error %></div>
                    <% } %>
                    <% if (messages && messages.success) { %>
                      <div class="alert alert-success" style="margin-top:1rem;"><%= messages.success %></div>
                    <% } %>
                </div>

                <!-- Articles list removed from dashboard. See /articles for creative cards. -->
            </div>
        </main>
    </div>
    <%- include('../partials/footer') %>
</body>
</html>
